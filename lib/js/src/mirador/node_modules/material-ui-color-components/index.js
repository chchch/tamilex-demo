import e,{useRef as r,useCallback as n,useLayoutEffect as a,useEffect as t}from"react";import o,{oneOfType as i,shape as l,number as c,string as u,array as s,arrayOf as d,objectOf as p}from"prop-types";import h from"styled-components";import g from"@material-ui/core/TextField";import m from"@material-ui/core/Popover";import b from"@material-ui/core/Button";import v from"@material-ui/core/Tooltip";import{makeStyles as f}from"@material-ui/core/styles";import x from"@material-ui/core/Box";import y from"@material-ui/core/Divider";import w from"@material-ui/core/FormControl";import k from"@material-ui/core/FormHelperText";import E from"@material-ui/core/InputLabel";import C from"@material-ui/core/Input";import O from"@material-ui/core/InputAdornment";import N from"@material-ui/core/Slider";function M(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function A(){return(A=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function z(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z(Object(n),!0).forEach((function(r){M(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function j(e,r){if(null==e)return{};var n,a,t=function(e,r){if(null==e)return{};var n,a,t={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||(t[n]=e[n]);return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function P(e,r){return r||(r=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))}var R,W,F={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},D=(e,r)=>{var n="00000000".concat((16777215&e).toString(16).toUpperCase()).substr(-6);if(!Number.isNaN(r)&&void 0!==r){var a=r.toString(16).toUpperCase();1===a.length&&(a="0".concat(a)),n+=a}return n},L=e=>[(16711680&e)>>16,(65280&e)>>8,255&e],q=e=>{var r=e.map(e=>{var r=e||0;return r<0&&(r=0),r>255&&(r=255),r});return r[3]<<24|r[0]<<16|r[1]<<8|r[2]},T=e=>{if(!e||e.length<3||e.length>4)return{error:"not valid size"};var r=e.map((e,r)=>"string"==typeof e?"%"!==e[e.length-1]?Math.round(Number(e)*(3===r?255:1)):Math.round(Number(e.substring(0,e.length-1))/100*255):Math.round(3===r?255*e:e));return{format:"rgb",value:q(r),rgb:r,alpha:r[3]}},I=e=>{var r,n=Number("0x".concat(e.substring(1)));if(!Number.isInteger(n)||Number.isNaN(n))return{error:"Not an hex value"};var a=[];if(7===e.length||9===e.length){var t=9===e.length?8:0;a[0]=n>>16+t&255,a[1]=n>>8+t&255,a[2]=n>>t&255,9===e.length&&(r=255&n,a[3]=r,n=q(a))}else{if(4!==e.length&&5!==e.length)return{error:"Wrong format"};var o=5===e.length?4:0;a[0]=n>>8+o&15,a[1]=n>>4+o&15,a[2]=n>>o&15,a[0]|=a[0]<<4,a[1]|=a[1]<<4,a[2]|=a[2]<<4,5===e.length&&(r=15&n,r|=r<<4,a[3]=r),n=q(a)}return{format:"hex",value:n,rgb:a,alpha:r}},B=e=>{var r=e;return"string"==typeof r&&(r.indexOf("deg")>-1?r=r.substr(0,r.length-3):r.indexOf("rad")>-1?r=Math.round(r.substr(0,r.length-3)*(180/Math.PI)):r.indexOf("turn")>-1&&(r=Math.round(360*r.substr(0,r.length-4))),r=parseFloat(r,10)),Number.isNaN(r)&&(r=0),r>=360&&(r%=360),r<0&&(r=0),r},H=e=>{var r=e;return"string"==typeof r&&(r=parseFloat(r.indexOf("%")>-1?r.substring(0,r.length-1):r,10)),Number.isNaN(r)?r=0:r>100?r=100:r<0&&(r=0),r},V=e=>{if(!e||e.length<3||e.length>4)return{error:"Not a valid size"};var r,n=e,a=B(n[0]),t=H(n[1]),o=H(n[2]);n[0]=a,n[1]=t,n[2]=o,o/=100;var i=(t/=100)*(1-Math.abs(2*o-1)),l=i*(1-Math.abs(a/60%2-1)),c=o-i/2;0===t?(r=[o,o,o],c=0):r=a>=0&&a<60?[i,l,0]:a>=60&&a<120?[l,i,0]:a>=120&&a<180?[0,i,l]:a>=180&&a<240?[0,l,i]:a>=240&&a<300?[l,0,i]:[i,0,l],r[0]=Math.round(255*(r[0]+c)),r[1]=Math.round(255*(r[1]+c)),r[2]=Math.round(255*(r[2]+c));var u=n[3];return void 0!==u&&("string"==typeof u&&(u=u.indexOf("%")>-1?parseFloat(u.substring(0,u.length-1),10)/100:parseFloat(u,10)),u=Math.floor(255*u),r[3]=u),{format:"hsl",value:q(r),rgb:r,hsl:n,alpha:u}},X=e=>{if(!e||e.length<3||e.length>4)return{error:"Not a valid size"};var r,n=B(e[0]),a=H(e[1]),t=H(e[2]);if(t*=2.55,0===a)r=[t=Math.round(t),t,t];else{n/=360,a/=100;var o=Math.floor(6*n),i=6*n-o,l=Math.round(t*(1-a)),c=Math.round(t*(1-a*i)),u=Math.round(t*(1-a*(1-i)));t=Math.round(t),r=0===(o%=6)?[t,u,l]:1===o?[c,t,l]:2===o?[l,t,u]:3===o?[l,c,t]:4===o?[u,l,t]:[t,l,c]}var s=e[3];return void 0!==s&&("string"==typeof s&&(s=s.indexOf("%")>-1?parseFloat(s.substring(0,s.length-1),10)/100:parseFloat(s,10)),s=Math.floor(255*s),r[3]=s),{format:"hsl",value:q(r),rgb:r,hsv:e,alpha:s}},U=e=>{var r=e[0]/255,n=e[1]/255,a=e[2]/255,t=Math.min(r,n,a),o=Math.max(r,n,a);return{cmax:o,cmin:t,delta:o-t,r:r,g:n,b:a}},Y=e=>{var{cmin:r,cmax:n,delta:a,r:t,g:o,b:i}=U(e),l=0,c=0,u=(r+n)/2;0!==a&&(c=a/(1-Math.abs(2*u-1)),c=Math.round(+(100*c).toFixed(1)),l=n===t?(o-i)/a%6:n===o?(i-t)/a+2:(t-o)/a+4,(l=Math.round(60*l))<0&&(l+=360));var s=[l,c,u=Math.round(u+100*u)];return 4===e.length&&(s[3]=e[3]/255),s},G=e=>{var{cmax:r,delta:n,r:a,g:t,b:o}=U(e);if(0===n)return[0,0,Math.round(100*r)];var i,l=r,c=n/r,u=(r-a)/n,s=(r-t)/n,d=(r-o)/n;return(i=(i=a===r?d-s:t===r?2+u-d:4+s-u)/6%1)<0&&(i+=1),[i=Math.round(360*i),c=Math.round(100*c),l=Math.round(100*l)]},K=e=>{var r=e.substring(e.indexOf("(")+1,e.indexOf(")"));return r.indexOf(",")>-1?r.split(","):r.indexOf(" ")>-1?r.split(" ").filter(e=>e.length>0&&"/"!==e):void 0},J=["plain","hex","rgb","hsl","hsv"],Q=[e=>({format:"plain",value:F[e[0]]}),e=>I(e[0]),e=>T(e),e=>V(e),e=>X(e)],Z=[e=>({format:"plain",value:F[e]}),e=>I(e),e=>T(K(e)),e=>V(K(e))],$=[e=>void 0!==F[e],e=>e.startsWith("#"),e=>e.startsWith("rgb(")||e.startsWith("rgba("),e=>e.startsWith("hsl(")||e.startsWith("hsla(")],_=function(e,r){var n,a,t,o,i,l,c,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={raw:e},d=r||"unknown";if("transparent"===e)s.name=e,d="plain",a=0;else if("string"==typeof e){var p=e.trim().toLocaleLowerCase(),h=$.findIndex(e=>e(p));h>-1&&(({value:n,format:d,rgb:t,hsl:o,alpha:a,error:l}=Z[h](p)),"plain"===d&&(s.name=e),d&&(s.css={backgroundColor:e}))}else if(Number.isInteger(e))n=e,d="number";else if(Array.isArray(e)&&d){var g=J.findIndex(e=>e===d);g>-1?({value:n,format:d,rgb:t,hsl:o,hsv:i,alpha:a,error:l}=Q[g](e)):l="unkown format"}else e&&"r"in e&&"g"in e&&"b"in e?(t=[e.r,e.g,e.b],e.a&&t.push(e.a),({value:n,format:d,rgb:t,alpha:a,error:l}=T(t))):e&&"h"in e&&"s"in e&&"l"in e?(o=[e.h,e.s,e.l],e.a&&o.push(e.a),({value:n,format:d,rgb:t,hsl:o,alpha:a,error:l}=V(o))):e&&"h"in e&&"s"in e&&"v"in e&&(i=[e.h,e.s,e.v],e.a&&i.push(e.a),({value:n,format:d,rgb:t,hsv:i,alpha:a,error:l}=X(i)));void 0===n&&(n=0,a=0===a?a:void 0,s.css={backgroundImage:"\n        linear-gradient(45deg, #ccc 25%, transparent 25%), \n        linear-gradient(135deg, #ccc 25%, transparent 25%),\n        linear-gradient(45deg, transparent 75%, #ccc 75%),\n        linear-gradient(135deg, transparent 75%, #ccc 75%)",backgroundSize:"8px 8px",backgroundPosition:"0 0, 4px 0, 4px -4px, 0px 4px",backgroundColor:"white"},"transparent"!==e&&(d="unknown",s.name="none")),l&&(s.error=l),s.value=n,s.alpha=Number.isNaN(a)||void 0===a?1:a/255,s.format=d,u||1===s.alpha?1===s.alpha&&-16777216===s.value&&(c=255):c=Math.floor(255*s.alpha);var m=D(n,c);return s.hex=m,t=t||L(n),s.rgb=t,s.hsv=i||G(t),s.hsl=o||Y(t),s.css||(s.css={backgroundColor:"#".concat(m)}),s.name||(s.name=Object.keys(F).find(e=>F[e]===n)||"color-".concat(m)),s},ee=(e,r,n)=>{var a;return"hex"===r&&(a="#".concat(D(e.value,n||1===e.alpha?void 0:Math.floor(255*e.alpha)))),a},re=(e,r,n,a)=>{var t=e,o=!1;return e&&e.format&&e.name?t.error&&n&&(t.error=n(t.error)):(t=e,n&&"string"==typeof t&&(R&&a===W||(W=a,R={},Object.keys(F).forEach(e=>{R[n(e)]=e})),o=(t=R[t]||t)!==e),(t=_(t,null,r)).name&&n&&(t.translated=n(t.name),o&&t.translated&&(t.name=t.translated),t.error&&(t.error=n(t.error)))),t},ne=i([l({css:l({}),value:c,hex:u,raw:i([u,s,c,l]),name:u,alpha:c,rgb:d(c),hsv:d(c),hsl:d(c)}),u,c]),ae=p(u),te=d(u),oe={use:()=>({i18n:{language:"us"},t:e=>e})},ie=e=>(e&&(oe.use=e),oe.use());function le(){var e=P(["\n  width: min-content;\n"]);return le=function(){return e},e}function ce(){var e=P(["\n  background-image: ",";\n  background-color: ",";\n  background-size: ",";\n  background-position: ",";\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n  border: ",";\n  border-radius: 4px;\n  padding: 0px;\n  width: ",";\n  min-width: ",";\n  height: ",";\n  &:hover {\n    background-color: ",";\n  }\n  &:active {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n  }\n"]);return ce=function(){return e},e}var ue=h(r=>{var n=j(r,["color","style","size","hoverColor","borderColor","borderWidth","tooltip"]);return e.createElement(b,A({"data-testid":"colorbutton"},n))})(ce(),e=>e.style.backgroundImage,e=>e.style.backgroundColor,e=>e.style.backgroundSize,e=>e.style.backgroundPosition,e=>"".concat(e.borderWidth||0,"px solid ").concat(e.borderColor||"#767676"),e=>"".concat(e.size,"px"),e=>"".concat(e.size,"px"),e=>"".concat(e.size,"px"),e=>e.hoverColor),se=h.div(le()),de=r=>{var{color:n,size:a,borderWidth:t,borderColor:o,forwardRef:i,tooltip:l,disableAlpha:c}=r,u=j(r,["color","size","borderWidth","borderColor","forwardRef","tooltip","disableAlpha"]),{t:s,i18n:d}=ie(),p=re(n,s,c,d.language),h=s(l),g=p.css,m=p.hsl[2]-10;m<30&&(m=p.hsl[2]+50);var b=p.alpha,f="hsl(".concat(p.hsl[0],", ").concat(p.hsl[1],"%, ").concat(m,"%, ").concat(b,")"),x=e.createElement(ue,A({style:g,size:a,hoverColor:f,borderColor:o,borderWidth:t,ref:i,variant:"contained","aria-label":p.name},u),e.createElement("span",null));return l?e.createElement(v,{title:h},e.createElement(se,null,x)):x};de.propTypes={color:ne.isRequired,size:o.number,disableAlpha:o.bool,borderWidth:o.number,borderColor:o.string,tooltip:o.string,forwardRef:o.shape({current:o.instanceOf(Element)})},de.defaultProps={size:24,borderWidth:0,borderColor:void 0,forwardRef:void 0,tooltip:void 0,disableAlpha:!1};var pe="undefined"!=typeof window?a:t;function he(e){var a=r(e);return pe(()=>{a.current=e}),n((function(){return(0,a.current)(...arguments)}),[])}function ge(){var e=P(["\n  position: absolute;\n  width: inherit;\n  height: inherit;\n  background: ",";\n  margin: 0;\n  & .muicc-hsvgradient-s {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0)) repeat scroll 0%\n      0%;\n  }\n  & .muicc-hsvgradient-v {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n  }\n  & .muicc-hsvgradient-v {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n  }\n  & .muicc-hsvgradient-cursor {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    border: 1px solid #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    transition: box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n    border-radius: 4px;\n    cursor: ",";\n    zindex: 100;\n    transform: translate(-4px, -4px);\n  }\n  & .muicc-hsvgradient-cursor:hover {\n    box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n  }\n  & .muicc-hsvgradient-cursor:focus {\n    outline: none !important;\n    box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n  }\n  & .muicc-hsvgradient-cursor:focus > div {\n    // TODO\n  }\n  & .muicc-hsvgradient-cursor-c {\n    width: 8px;\n    height: 8px;\n    border-radius: 4px;\n    box-shadow: white 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n  }\n"]);return ge=function(){return e},e}var me=h.div(ge(),e=>"".concat(e.cssRgb," none repeat scroll 0% 0%"),e=>!e.pressed&&"pointer"),be=r=>{var{className:n,color:a,onChange:t}=r,o=j(r,["className","color","onChange"]),i=e.useRef(a),[l,c]=e.useState(!1),[u,s]=e.useState(!1);e.useEffect(()=>{i.current=a});var d,p,h,g,m,b,v,f=e.useRef(),x=e.useRef(),y={x:0,y:0},w=(d=a.hsv[0],p=d/360,h=255,g=Math.floor(6*p),m=6*p-g,b=Math.round(h*(1-m)),v=Math.round(h*m),h=Math.round(h),0==(g%=6)?[h,v,0]:1===g?[b,h,0]:2===g?[0,h,v]:3===g?[0,b,h]:4===g?[v,0,h]:[h,0,b]),k="rgb(".concat(w[0],",").concat(w[1],",").concat(w[2],")"),E=(e,r)=>{y=e,x.current.style.top="".concat(e.y,"px"),x.current.style.left="".concat(e.x,"px"),r&&x.current.focus()},C=e=>{if(e){var{hsv:r}=a;y={x:Math.round(r[1]/100*(e.clientWidth-1)),y:Math.round((1-r[2]/100)*(e.clientHeight-1))},E(y)}};C(f.current),f.current&&(f.current.style.background="".concat(k," none repeat scroll 0% 0%"));var O=(e,r)=>{var{x:n,y:a}=e,o=r.getBoundingClientRect(),l={x:n-o.left,y:a-o.top};l.x<0&&(l.x=0),l.y<0&&(l.y=0),l.x>=r.clientWidth&&(l.x=r.clientWidth-1),l.y>=r.clientHeight&&(l.y=r.clientHeight-1),E(l,!0);var c=l.x/(r.clientWidth-1)*100,u=100*(1-l.y/(r.clientHeight-1)),s=i.current;t([s.hsv[0],c,u])};e.useEffect(()=>{var e=f.current;C(e);var r=e=>{c(!0),s(!0),e.preventDefault()},n=r=>{O({x:r.pageX,y:r.pageY},e),s(!1),r.preventDefault()},a=r=>{(u||r.buttons)&&(O({x:r.pageX,y:r.pageY},e),r.preventDefault())},t=r=>{var n={x:r.touches[0].pageX,y:r.touches[0].pageY};O(n,e),r.preventDefault()};return e.addEventListener("mousedown",r),e.addEventListener("mouseup",n),e.addEventListener("mousemove",a),e.addEventListener("touchdown",r),e.addEventListener("touchup",n),e.addEventListener("touchmove",t),()=>{e.removeEventListener("mousedown",r),e.removeEventListener("mouseup",n),e.removeEventListener("mousemove",a),e.removeEventListener("touchdown",r),e.removeEventListener("touchup",n),e.removeEventListener("touchmove",t)}},[]);var N=he(e=>{if(l){var{x:r,y:n}=y;switch(e.key){case"ArrowRight":r+=1;break;case"ArrowLeft":r-=1;break;case"ArrowDown":n+=1;break;case"ArrowUp":n-=1;break;case"Tab":return void c(!1);default:return}e.preventDefault();var a=f.current.getBoundingClientRect();O({x:r+a.left,y:n+a.top},f.current)}}),M=he(e=>{c(!0),e.preventDefault()}),z=he(e=>{c(!1),e.preventDefault()});return e.createElement("div",{className:n},e.createElement(me,A({},o,{ref:f,cssRgb:k,"data-testid":"hsvgradient-color"}),e.createElement("div",{className:"muicc-hsvgradient-s"},e.createElement("div",{className:"muicc-hsvgradient-v"},e.createElement("div",{ref:x,tabIndex:"0",role:"slider","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a.hsv[1],pressed:"".concat(u),"data-testid":"hsvgradient-cursor",className:"muicc-hsvgradient-cursor",onKeyDown:N,onFocus:M,onBlur:z},e.createElement("div",{className:"muicc-hsvgradient-cursor-c"}))))))};be.propTypes={color:ne.isRequired,className:o.string.isRequired,onChange:o.func.isRequired};var ve=r=>{var{element:n,defaultValue:a}=r,t=j(r,["element","defaultValue"]),[o,i]=e.useState(a);return e.createElement(n,S({},t,{value:o,onChange:i}))},fe=r=>{var n=n=>{var{defaultValue:a,value:t,onChange:o}=n,i=j(n,["defaultValue","value","onChange"]);return a?e.createElement(ve,S({element:r,defaultValue:a},i)):e.createElement(r,S({value:t,onChange:o},i))};return n.propTypes=S({},r.propTypes,{defaultValue:r.propTypes.value,onChange:o.func}),n.defaultProps=S({},r.defaultProps,{defaultValue:void 0,onChange:()=>{}}),n};function xe(){var e=P(["\n  display: flex;\n  flex-direction: row;\n  & .muicc-colorinput-value {\n    margin: 8px;\n  }\n  & .muicc-colorinput-raw {\n    padding-right: 4px;\n  }\n"]);return xe=function(){return e},e}function ye(){var e=P(["\n  width: 100px;\n"]);return ye=function(){return e},e}var we=h(w)(ye()),ke=h.div(xe()),Ee=r=>{var n,a,{value:t,format:o,onChange:i,disableAlpha:l,enableErrorDisplay:c,forwardRef:u}=r,s=j(r,["value","format","onChange","disableAlpha","enableErrorDisplay","forwardRef"]),{t:d,i18n:p}=ie(),h=re(t,l,d,p.language),g=e=>{if("plain"===o)i(e.target.value);else if("hex"===o)i("#".concat(e.target.value));else{var r=e.target.id,n=Number(e.target.value),t={};Object.keys(a).forEach(e=>{var o=a[e].value;e===r&&((o=n)<a[e].min&&(o=a[e].min),o>a[e].max&&(o=a[e].max)),t[e]=o}),i(t)}},m=(r,n,a,t,o)=>e.createElement(e.Fragment,null,e.createElement(E,{htmlFor:r,className:"muicc-colorinput-label","data-testid":"colorinput-label"},n),e.createElement(C,A({id:r,name:r,className:"muicc-colorinput-input",label:n,value:a,placeholder:n,inputProps:{"aria-label":"color-".concat(n),"data-testid":"colorinput-input"},onChange:g,startAdornment:o&&t&&e.createElement(O,{position:"start"},t)},s)));if("plain"===o)n=m("color-plain","Color",h.raw);else{a=function(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>e,t=re(e,n,a),o={};if("rgb"===r)o.r={value:t.rgb[0],format:"integer",min:0,max:255,name:a("R")},o.g={value:t.rgb[1],format:"integer",min:0,max:255,name:a("G")},o.b={value:t.rgb[2],format:"integer",min:0,max:255,name:a("B")};else if("hsv"===r)o.h={value:t.hsv[0],format:"integer",min:0,max:360,name:a("H"),unit:"°"},o.s={value:t.hsv[1],format:"integer",min:0,max:100,name:a("S"),unit:"%"},o.v={value:t.hsv[2],format:"integer",min:0,max:100,name:a("V"),unit:"%"};else if("hsl"===r)o.h={value:t.hsl[0],format:"integer",min:0,max:360,name:a("H"),unit:"°"},o.s={value:t.hsl[1],format:"integer",min:0,max:100,name:a("S"),unit:"%"},o.l={value:t.hsl[2],format:"integer",min:0,max:100,name:a("L"),unit:"%"};else if("hex"===r){var{hex:i}=t;t.raw&&"string"==typeof t.raw&&t.raw.startsWith("#")&&(i=t.raw.substring(1)),o.hex={value:i,format:"hex",name:a("HEX"),unit:"#"}}else o.value=a(t.value),o.format="unknown";return o}(h,o,l,d);var b=Object.keys(a);n=e.createElement(ke,{ref:u},b.map(r=>e.createElement(w,{key:r,className:"muicc-colorinput-raw",error:!!h.error},m(r,a[r].name,a[r].value,a[r].unit,1===b.length))))}return e.createElement(we,{error:!!h.error,"data-testid":"colorinput"},n,c&&h.error&&e.createElement(k,{id:"component-error-text"},h.error))};Ee.propTypes={value:ne,format:o.string,onChange:o.func.isRequired,disableAlpha:o.bool,enableErrorDisplay:o.bool,forwardRef:o.shape({current:o.instanceOf(Element)})},Ee.defaultProps={value:"",format:"plain",forwardRef:void 0,disableAlpha:!1,enableErrorDisplay:!0};var Ce=fe(Ee);function Oe(){var e=P(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding: 8px 0 0 8px;\n  & .muicc-palette-button {\n    margin: 0 8px 8px 0;\n    padding: 0;\n  }\n"]);return Oe=function(){return e},e}var Ne=h.div(Oe()),Me=r=>{var{size:n,borderWidth:a,palette:t,onSelect:o,disableAlpha:i}=r,{t:l}=ie();return e.createElement(Ne,null,Object.keys(t).map(r=>e.createElement(de,{size:n,key:"".concat(r),color:t[r],className:"muicc-palette-button",borderWidth:a,tooltip:r,disableAlpha:i,onClick:()=>(e=>{var r=l(e);o&&o(r,t[e])})(r)})))};function Ae(){var e=P(["\n  width: 100%;\n  height: 16px;\n  padding: 0;\n  & .MuiSlider-rail {\n    height: 16px;\n    opacity: 1;\n    background: rgba(0, 0, 0, 0)\n      linear-gradient(\n        to right,\n        rgb(255, 0, 0) 0%,\n        rgb(255, 255, 0) 17%,\n        rgb(0, 255, 0) 33%,\n        rgb(0, 255, 255) 50%,\n        rgb(0, 0, 255) 67%,\n        rgb(255, 0, 255) 83%,\n        rgb(255, 0, 0) 100%\n      )\n      repeat scroll 0% 0%;\n    border-radius: 0;\n  }\n  & .MuiSlider-track {\n    height: 16px;\n    opacity: 0;\n    border-radius: 4px;\n    background-color: transparent;\n  }\n  & .MuiSlider-thumb {\n    width: 16px;\n    height: 16px;\n    margin-top: 0px;\n    margin-left: -8px;\n    background-color: #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    &:focus {\n      box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n    }\n  }\n"]);return Ae=function(){return e},e}Me.propTypes={borderWidth:o.number,size:o.number,palette:ae.isRequired,forwardRef:o.shape({current:o.instanceOf(Element)}),onSelect:o.func,disableAlpha:o.bool},Me.defaultProps={borderWidth:0,size:24,forwardRef:void 0,onSelect:void 0,disableAlpha:!1};var ze=h(N)(Ae());function Se(){var e=P(["\n  color: #6666;\n  width: 100%;\n  height: 16px;\n  padding: 0;\n  background: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%);\n  background-color: rgba(0, 0, 0, 0);\n  background-position-x: 0%, 0%, 0%, 0%;\n  background-position-y: 0%, 0%, 0%, 0%;\n  background-size: auto, auto, auto, auto;\n  background-size: 8px 8px;\n  background-color: white;\n  background-position: 0 0, 4px 0, 4px -4px, 0px 4px;\n  & .MuiSlider-rail {\n    height: 16px;\n    opacity: 1;\n    background: ",";\n    border-radius: 0;\n  }\n  & .MuiSlider-track {\n    height: 16px;\n    opacity: 0;\n    border-radius: 4px;\n  }\n  & .MuiSlider-thumb {\n    width: 16px;\n    height: 16px;\n    margin-top: 0px;\n    margin-left: -8px;\n    background-color: #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    &:focus {\n      box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n    }\n  }\n"]);return Se=function(){return e},e}var je=h(r=>{var n=j(r,["color"]);return e.createElement(N,n)})(Se(),e=>"rgba(0, 0, 0, 0) linear-gradient(to right, ".concat(e.color,"00 0%, ").concat(e.color," 100%) repeat scroll 0% 0%"));function Pe(){var e=P(["\n  justify-content: space-around;\n  overflow: hidden;\n  width: ",";\n  padding: 0px;\n  & .muicc-colorbox-hsvgradient {\n    width: ",";\n    height: calc(128px - 16px);\n    margin: 8px;\n  }\n  & .muicc-colorbox-sliders {\n    width: ",";\n    padding: 8px 8px 4px 8px;\n  }\n  & .muicc-colorbox-inputs {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 8px 4px 8px 8px;\n    justify-content: space-between;\n  }\n  & .muicc-colorbox-input {\n    marginright: 14px;\n  }\n  & .muicc-colorbox-colorBg {\n    width: 48px;\n    height: 48px;\n    background: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%),\n      linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%);\n    background-size: 8px 8px;\n    background-position: 0 0, 4px 0, 4px -4px, 0px 4px;\n    background-color: white;\n    border-radius: 4px;\n  }\n  & .muicc-colorbox-color {\n    width: 48px;\n    height: 48px;\n    background-color: ",";\n    border-radius: 4px;\n  }\n  & .muicc-colorbox-controls {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 8px;\n  }\n  & .muicc-colorbox-error {\n    color: #f44336;\n    line-height: 36.5px;\n  }\n  & .muicc-colorbox-controls > button {\n    margin-left: auto;\n  }\n"]);return Pe=function(){return e},e}var Re=h.div(Pe(),e=>"".concat(e.boxWidth,"px"),e=>"calc(".concat(e.boxWidth,"px - 16px)"),e=>"".concat(e.boxWidth,"px"),e=>e.backgroundColor),We=r=>{var n,{value:a,palette:t,inputFormats:o,deferred:i,onChange:l,disableAlpha:c}=r,u=j(r,["value","palette","inputFormats","deferred","onChange","disableAlpha"]),{t:s,i18n:d}=ie(),p=re(a,c,s,d.language),h=l;i&&([p,h]=e.useState(p),n=l);var g=e=>{var r=_(e);h(r)},{hsv:m}=p,{alpha:v}=p;v=void 0===v?100:Math.floor(100*v);var w=ee(p,"hex",!0),{backgroundColor:k}=p.css,E=f(e=>({root:{backgroundColor:e.palette.background.paper,position:"relative",width:"min-content",height:"min-content",padding:"0px"}}))().root;return e.createElement(x,A({p:2,className:E},u),e.createElement(Re,{boxWidth:320,backgroundColor:k},e.createElement(be,{className:"muicc-colorbox-hsvgradient",color:p,onChange:e=>{var r=_(e,"hsv");h(r)}}),e.createElement("div",{className:"muicc-colorbox-sliders"},e.createElement(ze,{"data-testid":"hueslider","aria-label":"color slider",value:m[0],min:0,max:360,onChange:(e,r)=>{var n=_([r,p.hsv[1],p.hsv[2]],"hsv");h(n)}}),!c&&e.createElement(je,{"data-testid":"alphaslider",color:w,valueLabelDisplay:"auto","aria-label":"alpha slider",value:v,min:0,max:100,onChange:(e,r)=>{var n=r/100,a=_([p.rgb[0],p.rgb[1],p.rgb[2],n],"rgb");h(a)}})),o&&e.createElement("div",{className:"muicc-colorbox-inputs"},e.createElement("div",{className:"muicc-colorbox-colorBg"},e.createElement("div",{className:"muicc-colorbox-color"})),o.map(r=>e.createElement(Ce,{key:r,value:p,format:r,disableAlpha:!0,enableErrorDisplay:!1,className:"muicc-colorbox-input",onChange:g}))),t&&e.createElement(e.Fragment,null,e.createElement(y,null),e.createElement(Me,{size:26.65,palette:t,onSelect:(e,r)=>{var n=_(r);n.name=e,h(n)},disableAlpha:c})),e.createElement("div",{className:"muicc-colorbox-controls"},p.error&&e.createElement("span",{className:"muicc-colorbox-error","data-testid":"colorbox-error"},s(p.error)),i&&e.createElement(b,{onClick:()=>{n(p)}},s("Set")))))};We.propTypes={value:ne,deferred:o.bool,palette:ae,inputFormats:te,onChange:o.func.isRequired,disableAlpha:o.bool},We.defaultProps={value:void 0,deferred:!1,palette:void 0,inputFormats:["hex","rgb"],disableAlpha:!1};var Fe=fe(We);function De(){var e=P(["\n  display: flex;\n  flex-direction: row;\n  width: max-content;\n  & .muicc-colorpicker-button {\n    margin: 6px;\n  }\n"]);return De=function(){return e},e}var Le=h.div(De()),qe=r=>{var{value:n,disableTextfield:a,deferred:t,palette:o,inputFormats:i,openAtStart:l,onChange:c,onOpen:u,doPopup:s,disableAlpha:d}=r,p=e.useRef(),[h,b]=e.useState(l),{t:v,i18n:f}=ie(),x=re(n,d,v,f.language),y=(e=>{var r=e.name;return r.startsWith("color-")?r="string"==typeof e.raw&&e.raw.startsWith("#")?e.raw:ee(e,"hex"):"none"===r&&(r=e.raw),r})(x),w=()=>{var e=Boolean(p.current);b(e),u&&u(e)},k=()=>{b(!1),u&&u(!1)},E=e.createElement(Fe,{value:x,style:{position:"relative"},deferred:t,palette:o,inputFormats:i,disableAlpha:d,onChange:e=>{c(e),t&&k()}});return E=s?s(E):e.createElement(m,{id:"color-popover",open:h,anchorEl:p.current,onClose:k,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},E),e.createElement(Le,{ref:p},e.createElement(de,{"data-testid":"colorpicker-button",className:"muicc-colorpicker-button",color:x,onClick:w}),a?e.createElement("div",{role:"button","data-testid":"colorpicker-noinput",onClick:w},x.raw):e.createElement(g,{color:"primary",value:y,onChange:e=>{c(e.target.value)},"data-testid":"colorpicker-input"}),E)};qe.propTypes={value:ne,disableTextfield:o.bool,deferred:o.bool,palette:ae,inputFormats:te,onChange:o.func.isRequired,onOpen:o.func,openAtStart:o.bool,doPopup:o.func,disableAlpha:o.bool},qe.defaultProps={value:"none",disableTextfield:!1,deferred:!1,palette:void 0,inputFormats:["hex","rgb"],onOpen:void 0,openAtStart:!1,doPopup:void 0,disableAlpha:!1};var Te=fe(qe);export{Fe as ColorBox,de as ColorButton,Ce as ColorInput,Me as ColorPalette,Te as ColorPicker,ie as useTranslate};
//# sourceMappingURL=index.js.map
