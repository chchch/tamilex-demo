{"version":3,"file":"index.js","sources":["../src/helpers/cssColors.js","../src/helpers/colorTool.js","../src/helpers/commonTypes.js","../src/helpers/useTranslate.js","../src/components/ColorButton.jsx","../src/helpers/useEventCallback.js","../src/components/ColorBox/HSVGradient.jsx","../src/helpers/uncontrolled.js","../src/components/ColorInput.jsx","../src/components/ColorPalette.jsx","../src/components/ColorBox/HueSlider.jsx","../src/components/ColorBox/AlphaSlider.jsx","../src/components/ColorBox/index.jsx","../src/components/ColorPicker.jsx"],"sourcesContent":["/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n//  https://drafts.csswg.org/css-color/\nconst CSSCOLORS = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgrey: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  grey: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgrey: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32,\n};\n\nexport default CSSCOLORS;\n","/* eslint-disable no-bitwise */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport cssColors from './cssColors';\n\nconst getCssHexa = (n, alpha) => {\n  let hex = `00000000${(n & 0xffffff).toString(16).toUpperCase()}`.substr(-6);\n  if (!Number.isNaN(alpha) && alpha !== undefined) {\n    let a = alpha.toString(16).toUpperCase();\n    if (a.length === 1) a = `0${a}`;\n    hex += a;\n  }\n  return hex;\n};\n\nconst getRgb = c => [(c & 0xff0000) >> 16, (c & 0x00ff00) >> 8, c & 0x0000ff];\n\nconst rgbToInt = _rgb => {\n  const rgb = _rgb.map(_c => {\n    let c = _c || 0;\n    if (c < 0) c = 0;\n    if (c > 255) c = 255;\n    return c;\n  });\n  return (rgb[3] << 24) | (rgb[0] << 16) | (rgb[1] << 8) | rgb[2];\n};\n\nconst fromRgb = _rgb => {\n  if (!_rgb || _rgb.length < 3 || _rgb.length > 4) {\n    return { error: 'not valid size' };\n  }\n  const rgb = _rgb.map((v, i) =>\n    // eslint-disable-next-line no-nested-ternary\n    typeof v === 'string'\n      ? v[v.length - 1] !== '%'\n        ? Math.round(Number(v) * (i === 3 ? 255 : 1))\n        : Math.round((Number(v.substring(0, v.length - 1)) / 100) * 255)\n      : Math.round(i === 3 ? v * 255 : v),\n  );\n  const value = rgbToInt(rgb);\n  return { format: 'rgb', value, rgb, alpha: rgb[3] };\n};\n\nconst fromCssHexa = hex => {\n  let alpha;\n  let value = Number(`0x${hex.substring(1)}`);\n  if (!Number.isInteger(value) || Number.isNaN(value)) {\n    return { error: 'Not an hex value' };\n  }\n  const rgb = [];\n  if (hex.length === 7 || hex.length === 9) {\n    const padding = hex.length === 9 ? 8 : 0;\n    // #RRGGBB format\n    rgb[0] = (value >> (16 + padding)) & 0xff;\n    rgb[1] = (value >> (8 + padding)) & 0xff;\n    rgb[2] = (value >> padding) & 0xff;\n    if (hex.length === 9) {\n      // #RRGGBBAA format\n      alpha = value & 0xff;\n      rgb[3] = alpha;\n      value = rgbToInt(rgb);\n    }\n  } else if (hex.length === 4 || hex.length === 5) {\n    const padding = hex.length === 5 ? 4 : 0;\n    // #RGB format\n    rgb[0] = (value >> (8 + padding)) & 0xf;\n    rgb[1] = (value >> (4 + padding)) & 0xf;\n    rgb[2] = (value >> padding) & 0xf;\n    rgb[0] |= rgb[0] << 4;\n    rgb[1] |= rgb[1] << 4;\n    rgb[2] |= rgb[2] << 4;\n    if (hex.length === 5) {\n      // #RGBA format\n      alpha = value & 0xf;\n      alpha |= alpha << 4;\n      rgb[3] = alpha;\n    }\n    value = rgbToInt(rgb);\n  } else {\n    return { error: 'Wrong format' };\n  }\n  return { format: 'hex', value, rgb, alpha };\n};\n\nconst getDeg = _h => {\n  let h = _h;\n  if (typeof h === 'string') {\n    // Handle css unit for hsl\n    if (h.indexOf('deg') > -1) h = h.substr(0, h.length - 3);\n    else if (h.indexOf('rad') > -1) h = Math.round(h.substr(0, h.length - 3) * (180 / Math.PI));\n    else if (h.indexOf('turn') > -1) h = Math.round(h.substr(0, h.length - 4) * 360);\n    h = parseFloat(h, 10);\n  }\n  if (Number.isNaN(h)) h = 0;\n  if (h >= 360) h %= 360;\n  if (h < 0) h = 0;\n  return h;\n};\n\nconst getValue = _v => {\n  let v = _v;\n  if (typeof v === 'string') v = parseFloat(v.indexOf('%') > -1 ? v.substring(0, v.length - 1) : v, 10);\n  if (Number.isNaN(v)) v = 0;\n  else if (v > 100) v = 100;\n  else if (v < 0) v = 0;\n  return v;\n};\n\nconst fromHsl = _hsl => {\n  if (!_hsl || _hsl.length < 3 || _hsl.length > 4) {\n    return { error: 'Not a valid size' };\n  }\n  let rgb;\n  const hsl = _hsl;\n  const h = getDeg(hsl[0]);\n  let s = getValue(hsl[1]);\n  let l = getValue(hsl[2]);\n  hsl[0] = h;\n  hsl[1] = s;\n  hsl[2] = l;\n\n  s /= 100;\n  l /= 100;\n  const c = s * (1 - Math.abs(2 * l - 1));\n  const x = c * (1 - Math.abs(((h / 60) % 2) - 1));\n  let m = l - c / 2;\n  if (s === 0) {\n    rgb = [l, l, l];\n    m = 0;\n  } else if (h >= 0 && h < 60) {\n    rgb = [c, x, 0];\n  } else if (h >= 60 && h < 120) {\n    rgb = [x, c, 0];\n  } else if (h >= 120 && h < 180) {\n    rgb = [0, c, x];\n  } else if (h >= 180 && h < 240) {\n    rgb = [0, x, c];\n  } else if (h >= 240 && h < 300) {\n    rgb = [x, 0, c];\n  } /* if (h >= 300 && h < 360) */ else {\n    rgb = [c, 0, x];\n  }\n  rgb[0] = Math.round((rgb[0] + m) * 255);\n  rgb[1] = Math.round((rgb[1] + m) * 255);\n  rgb[2] = Math.round((rgb[2] + m) * 255);\n  let alpha = hsl[3];\n  if (alpha !== undefined) {\n    if (typeof alpha === 'string') {\n      alpha =\n        alpha.indexOf('%') > -1 ? parseFloat(alpha.substring(0, alpha.length - 1), 10) / 100 : parseFloat(alpha, 10);\n    }\n    alpha = Math.floor(alpha * 255);\n    rgb[3] = alpha;\n  }\n  const value = rgbToInt(rgb);\n  return { format: 'hsl', value, rgb, hsl, alpha };\n};\n\nconst fromHsv = hsv => {\n  if (!hsv || hsv.length < 3 || hsv.length > 4) {\n    return { error: 'Not a valid size' };\n  }\n  let rgb;\n  let h = getDeg(hsv[0]);\n  let s = getValue(hsv[1]);\n  let v = getValue(hsv[2]);\n\n  v *= 255 / 100;\n  if (s === 0) {\n    v = Math.round(v);\n    rgb = [v, v, v];\n  } else {\n    h /= 360;\n    s /= 100;\n    let i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = Math.round(v * (1 - s));\n    const q = Math.round(v * (1 - s * f));\n    const t = Math.round(v * (1 - s * (1 - f)));\n    v = Math.round(v);\n\n    i %= 6;\n    if (i === 0) rgb = [v, t, p];\n    else if (i === 1) rgb = [q, v, p];\n    else if (i === 2) rgb = [p, v, t];\n    else if (i === 3) rgb = [p, q, v];\n    else if (i === 4) rgb = [t, p, v];\n    /* if (i === 5) */ else rgb = [v, p, q];\n  }\n  let alpha = hsv[3];\n  if (alpha !== undefined) {\n    if (typeof alpha === 'string') {\n      alpha =\n        alpha.indexOf('%') > -1 ? parseFloat(alpha.substring(0, alpha.length - 1), 10) / 100 : parseFloat(alpha, 10);\n    }\n    alpha = Math.floor(alpha * 255);\n    rgb[3] = alpha;\n  }\n  const value = rgbToInt(rgb);\n  return { format: 'hsl', value, rgb, hsv, alpha };\n};\n\nconst getMinMax = rgb => {\n  const r = rgb[0] / 255;\n  const g = rgb[1] / 255;\n  const b = rgb[2] / 255;\n  const cmin = Math.min(r, g, b);\n  const cmax = Math.max(r, g, b);\n  const delta = cmax - cmin;\n  return { cmax, cmin, delta, r, g, b };\n};\n\nconst getHsl = rgb => {\n  const { cmin, cmax, delta, r, g, b } = getMinMax(rgb);\n  let h = 0;\n  let s = 0;\n  let l = (cmin + cmax) / 2;\n  if (delta !== 0) {\n    s = delta / (1 - Math.abs(2 * l - 1));\n    s = Math.round(+(s * 100).toFixed(1));\n\n    if (cmax === r) h = ((g - b) / delta) % 6;\n    else if (cmax === g) h = (b - r) / delta + 2;\n    else h = (r - g) / delta + 4;\n    h = Math.round(h * 60);\n    if (h < 0) h += 360;\n  }\n  l = Math.round(l + l * 100);\n  const hsl = [h, s, l];\n  if (rgb.length === 4) {\n    hsl[3] = rgb[3] / 255;\n  }\n  return hsl;\n};\n\nconst getHsv = rgb => {\n  const { cmax, delta, r, g, b } = getMinMax(rgb);\n  if (delta === 0) return [0, 0, Math.round(cmax * 100)];\n\n  let v = cmax;\n  let s = delta / cmax;\n  const rc = (cmax - r) / delta;\n  const gc = (cmax - g) / delta;\n  const bc = (cmax - b) / delta;\n\n  let h;\n  if (r === cmax) h = bc - gc;\n  else if (g === cmax) h = 2 + rc - bc;\n  else h = 4.0 + gc - rc;\n  h = (h / 6.0) % 1.0;\n  if (h < 0) h += 1.0;\n\n  h = Math.round(h * 360);\n  s = Math.round(s * 100);\n  v = Math.round(v * 100);\n  return [h, s, v];\n};\n\nconst tupleToArray = value => {\n  const tuple = value.substring(value.indexOf('(') + 1, value.indexOf(')'));\n  if (tuple.indexOf(',') > -1) {\n    return tuple.split(',');\n  }\n  if (tuple.indexOf(' ') > -1) {\n    return tuple.split(' ').filter(e => e.length > 0 && e !== '/');\n  }\n  return undefined;\n};\n\nconst colorsFormats = ['plain', 'hex', 'rgb', 'hsl', 'hsv'];\n\nconst colorsFunc = [\n  value => ({ format: 'plain', value: cssColors[value[0]] }),\n  value => fromCssHexa(value[0]),\n  value => fromRgb(value),\n  value => fromHsl(value),\n  value => fromHsv(value),\n];\n\nconst colorsCssFunc = [\n  value => ({ format: 'plain', value: cssColors[value] }),\n  value => fromCssHexa(value),\n  value => fromRgb(tupleToArray(value)),\n  value => fromHsl(tupleToArray(value)),\n];\n\nconst colorsCssConditions = [\n  value => cssColors[value] !== undefined,\n  value => value.startsWith('#'),\n  value => value.startsWith('rgb(') || value.startsWith('rgba('),\n  value => value.startsWith('hsl(') || value.startsWith('hsla('),\n];\n\nconst parse = (raw, _format, disableAlpha = false) => {\n  const color = { raw };\n  let value;\n  let alpha;\n  let rgb;\n  let hsl;\n  let hsv;\n  let error;\n  let format = _format || 'unknown';\n  if (raw === 'transparent') {\n    color.name = raw;\n    format = 'plain';\n    alpha = 0;\n  } else if (typeof raw === 'string') {\n    const r = raw.trim().toLocaleLowerCase();\n    const index = colorsCssConditions.findIndex(func => func(r));\n    if (index > -1) {\n      ({ value, format, rgb, hsl, alpha, error } = colorsCssFunc[index](r));\n      if (format === 'plain') color.name = raw;\n      // Check if raw is css valid\n      if (format) color.css = { backgroundColor: raw };\n    }\n  } else if (Number.isInteger(raw)) {\n    value = raw;\n    format = 'number';\n  } else if (Array.isArray(raw) && format) {\n    const index = colorsFormats.findIndex(f => f === format);\n    if (index > -1) {\n      ({ value, format, rgb, hsl, hsv, alpha, error } = colorsFunc[index](raw));\n    } else {\n      error = 'unkown format';\n    }\n  } else if (raw && 'r' in raw && 'g' in raw && 'b' in raw) {\n    rgb = [raw.r, raw.g, raw.b];\n    if (raw.a) rgb.push(raw.a);\n    ({ value, format, rgb, alpha, error } = fromRgb(rgb));\n  } else if (raw && 'h' in raw && 's' in raw && 'l' in raw) {\n    hsl = [raw.h, raw.s, raw.l];\n    if (raw.a) hsl.push(raw.a);\n    ({ value, format, rgb, hsl, alpha, error } = fromHsl(hsl));\n  } else if (raw && 'h' in raw && 's' in raw && 'v' in raw) {\n    hsv = [raw.h, raw.s, raw.v];\n    if (raw.a) hsv.push(raw.a);\n    ({ value, format, rgb, hsv, alpha, error } = fromHsv(hsv));\n  }\n  if (value === undefined) {\n    value = 0;\n    alpha = alpha === 0 ? alpha : undefined;\n    color.css = {\n      backgroundImage: `\n        linear-gradient(45deg, #ccc 25%, transparent 25%), \n        linear-gradient(135deg, #ccc 25%, transparent 25%),\n        linear-gradient(45deg, transparent 75%, #ccc 75%),\n        linear-gradient(135deg, transparent 75%, #ccc 75%)`,\n      backgroundSize: '8px 8px',\n      backgroundPosition: '0 0, 4px 0, 4px -4px, 0px 4px',\n      backgroundColor: 'white',\n    };\n    if (raw !== 'transparent') {\n      format = 'unknown';\n      color.name = 'none';\n    }\n  }\n  if (error) color.error = error;\n  color.value = value;\n  color.alpha = Number.isNaN(alpha) || alpha === undefined ? 1 : alpha / 255;\n  color.format = format;\n  let alpha255;\n  if (!disableAlpha && color.alpha !== 1) {\n    alpha255 = Math.floor(color.alpha * 255);\n  } else if (color.alpha === 1 && color.value === -16777216) {\n    // special case to distinguish between black 0x000000FF and transparent 0x000\n    alpha255 = 255;\n  }\n  const hex = getCssHexa(value, alpha255);\n  color.hex = hex;\n  rgb = rgb || getRgb(value);\n  color.rgb = rgb;\n  color.hsv = hsv || getHsv(rgb);\n  color.hsl = hsl || getHsl(rgb);\n  if (!color.css) {\n    color.css = { backgroundColor: `#${hex}` };\n  }\n  if (!color.name) {\n    // find color name\n    color.name = Object.keys(cssColors).find(n => cssColors[n] === value) || `color-${hex}`;\n  }\n  return color;\n};\n\nconst getCssColor = (color, format, disableAlpha) => {\n  let value;\n  if (format === 'hex') {\n    value = `#${getCssHexa(\n      color.value,\n      disableAlpha || color.alpha === 1 ? undefined : Math.floor(color.alpha * 255),\n    )}`;\n  }\n  return value;\n};\n\nlet cssColorsTranslated;\nlet language;\n\nconst validateColor = (_color, disableAlpha, translate, translateLanguage) => {\n  let color = _color;\n  let isTranslated = false;\n  if (!(_color && _color.format && _color.name)) {\n    color = _color;\n    if (translate && typeof color === 'string') {\n      if (!cssColorsTranslated || translateLanguage !== language) {\n        language = translateLanguage;\n        cssColorsTranslated = {};\n        Object.keys(cssColors).forEach(name => {\n          cssColorsTranslated[translate(name)] = name;\n        });\n      }\n      color = cssColorsTranslated[color] || color;\n      isTranslated = color !== _color;\n    }\n    color = parse(color, null, disableAlpha);\n    if (color.name && translate) {\n      color.translated = translate(color.name);\n      if (isTranslated && color.translated) {\n        color.name = color.translated;\n      }\n      if (color.error) color.error = translate(color.error);\n    }\n  } else if (color.error && translate) {\n    color.error = translate(color.error);\n  }\n  return color;\n};\n\nconst getComponents = (_color, format, disableAlpha, translate = value => value) => {\n  const color = validateColor(_color, disableAlpha, translate);\n  const components = {};\n  if (format === 'rgb') {\n    components.r = { value: color.rgb[0], format: 'integer', min: 0, max: 255, name: translate('R') };\n    components.g = { value: color.rgb[1], format: 'integer', min: 0, max: 255, name: translate('G') };\n    components.b = { value: color.rgb[2], format: 'integer', min: 0, max: 255, name: translate('B') };\n  } else if (format === 'hsv') {\n    components.h = { value: color.hsv[0], format: 'integer', min: 0, max: 360, name: translate('H'), unit: '°' };\n    components.s = { value: color.hsv[1], format: 'integer', min: 0, max: 100, name: translate('S'), unit: '%' };\n    components.v = { value: color.hsv[2], format: 'integer', min: 0, max: 100, name: translate('V'), unit: '%' };\n  } else if (format === 'hsl') {\n    components.h = { value: color.hsl[0], format: 'integer', min: 0, max: 360, name: translate('H'), unit: '°' };\n    components.s = { value: color.hsl[1], format: 'integer', min: 0, max: 100, name: translate('S'), unit: '%' };\n    components.l = { value: color.hsl[2], format: 'integer', min: 0, max: 100, name: translate('L'), unit: '%' };\n  } else if (format === 'hex') {\n    let { hex } = color;\n    if (color.raw && typeof color.raw === 'string' && color.raw.startsWith('#')) {\n      hex = color.raw.substring(1);\n    }\n    components.hex = { value: hex, format: 'hex', name: translate('HEX'), unit: '#' };\n  } else {\n    components.value = translate(color.value);\n    components.format = 'unknown';\n  }\n  return components;\n};\n\nexport { parse, getComponents, validateColor, getCssColor };\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { arrayOf, objectOf, shape, array, number, string, oneOfType } from 'prop-types';\n\nconst color = oneOfType([\n  shape({\n    css: shape({\n      // TODO\n    }),\n    value: number,\n    hex: string,\n    raw: oneOfType([string, array, number, shape]),\n    name: string,\n    alpha: number,\n    rgb: arrayOf(number),\n    hsv: arrayOf(number),\n    hsl: arrayOf(number),\n  }),\n  string,\n  number,\n]);\n\nconst palette = objectOf(string);\n\nconst inputFormats = arrayOf(string);\n\nexport { color, palette, inputFormats };\n","/* eslint-disable no-bitwise */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nconst globalTranslate = { use: () => ({ i18n: { language: 'us' }, t: v => v }) };\n\nconst useTranslate = _translation => {\n  if (_translation) globalTranslate.use = _translation;\n  return globalTranslate.use();\n};\n\nexport default useTranslate;\n","/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport * as ColorTool from '../helpers/colorTool';\nimport * as CommonTypes from '../helpers/commonTypes';\nimport useTranslate from '../helpers/useTranslate';\n\nconst StyledButton = styled(({ color, style, size, hoverColor, borderColor, borderWidth, tooltip, ...other }) => (\n  <Button data-testid=\"colorbutton\" {...other} />\n))`\n  background-image: ${props => props.style.backgroundImage};\n  background-color: ${props => props.style.backgroundColor};\n  background-size: ${props => props.style.backgroundSize};\n  background-position: ${props => props.style.backgroundPosition};\n  box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n  border: ${props => `${props.borderWidth || 0}px solid ${props.borderColor || '#767676'}`};\n  border-radius: 4px;\n  padding: 0px;\n  width: ${props => `${props.size}px`};\n  min-width: ${props => `${props.size}px`};\n  height: ${props => `${props.size}px`};\n  &:hover {\n    background-color: ${props => props.hoverColor};\n  }\n  &:active {\n    box-shadow: none;\n  }\n  &:focus {\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.5);\n  }\n`;\n\nconst Styleddiv = styled.div`\n  width: min-content;\n`;\n\n/**\n- Use a ColorButton to select a predefined color by clicking on this button.\n- If the color is not valid or transparent a crossed background is displayed.\n */\nconst ColorButton = ({ color: c, size, borderWidth, borderColor, forwardRef, tooltip, disableAlpha, ...props }) => {\n  const { t, i18n } = useTranslate();\n  const color = ColorTool.validateColor(c, t, disableAlpha, i18n.language);\n  const translated = t(tooltip);\n  const style = color.css; // || { backgroundColor: ColorTool.getCssColor(color) };\n  let l = color.hsl[2] - 10;\n  if (l < 30) l = color.hsl[2] + 50;\n  const a = color.alpha; // || 0.2;\n  const hoverColor = `hsl(${color.hsl[0]}, ${color.hsl[1]}%, ${l}%, ${a})`;\n  const component = (\n    <StyledButton\n      style={style}\n      size={size}\n      hoverColor={hoverColor}\n      borderColor={borderColor}\n      borderWidth={borderWidth}\n      ref={forwardRef}\n      variant=\"contained\"\n      aria-label={color.name}\n      {...props}\n    >\n      <span />\n    </StyledButton>\n  );\n  if (tooltip) {\n    return (\n      <Tooltip title={translated}>\n        <Styleddiv>{component}</Styleddiv>\n      </Tooltip>\n    );\n  }\n  return component;\n};\n\nColorButton.propTypes = {\n  /**\n    The color to display, could be a css valid string, an integer, or a Color object see  ColorType\n   */\n  color: CommonTypes.color.isRequired,\n  /**\n    The size of the button in pixel\n   */\n  size: PropTypes.number,\n  /**\n    Don't use alpha\n   */\n  disableAlpha: PropTypes.bool,\n  /**\n    The width of the button's border, not displayed if borderWidth=0\n   */\n  borderWidth: PropTypes.number,\n  /**\n    The css color of the button's border, not displayed if borderWidth=0\n   */\n  borderColor: PropTypes.string,\n  /**\n    A tooltip could be added to the button to display the color name or value\n   */\n  tooltip: PropTypes.string,\n  /**\n    Internal usage\n   */\n  forwardRef: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n};\n\nColorButton.defaultProps = {\n  size: 24,\n  borderWidth: 0,\n  borderColor: undefined,\n  forwardRef: undefined,\n  tooltip: undefined,\n  disableAlpha: false,\n};\n\nexport default ColorButton;\n","/* istanbul ignore file */\nimport * as React from 'react';\n\nconst useEnhancedEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\n/**\n * https://github.com/facebook/react/issues/14099#issuecomment-440013892\n *\n * @param {function} fn\n */\nexport default function useEventCallback(fn) {\n  const ref = React.useRef(fn);\n  useEnhancedEffect(() => {\n    ref.current = fn;\n  });\n  return React.useCallback((...args) => (0, ref.current)(...args), []);\n}\n","/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport * as CommonTypes from '../../helpers/commonTypes';\nimport useEventCallback from '../../helpers/useEventCallback';\n\nconst getRGB = _h => {\n  let rgb;\n  const h = _h / 360;\n  let v = 255;\n  let i = Math.floor(h * 6);\n  const f = h * 6 - i;\n  const p = 0;\n  const q = Math.round(v * (1 - f));\n  const t = Math.round(v * f);\n  v = Math.round(v);\n  i %= 6;\n  if (i === 0) rgb = [v, t, p];\n  else if (i === 1) rgb = [q, v, p];\n  else if (i === 2) rgb = [p, v, t];\n  else if (i === 3) rgb = [p, q, v];\n  else if (i === 4) rgb = [t, p, v];\n  else rgb = [v, p, q]; // if (i === 5)\n  return rgb;\n};\n\nconst StyledRoot = styled.div`\n  position: absolute;\n  width: inherit;\n  height: inherit;\n  background: ${props => `${props.cssRgb} none repeat scroll 0% 0%`};\n  margin: 0;\n  & .muicc-hsvgradient-s {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0)) repeat scroll 0%\n      0%;\n  }\n  & .muicc-hsvgradient-v {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n  }\n  & .muicc-hsvgradient-v {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0) linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)) repeat scroll 0% 0%;\n  }\n  & .muicc-hsvgradient-cursor {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    border: 1px solid #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    transition: box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;\n    border-radius: 4px;\n    cursor: ${props => !props.pressed && 'pointer'};\n    zindex: 100;\n    transform: translate(-4px, -4px);\n  }\n  & .muicc-hsvgradient-cursor:hover {\n    box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n  }\n  & .muicc-hsvgradient-cursor:focus {\n    outline: none !important;\n    box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n  }\n  & .muicc-hsvgradient-cursor:focus > div {\n    // TODO\n  }\n  & .muicc-hsvgradient-cursor-c {\n    width: 8px;\n    height: 8px;\n    border-radius: 4px;\n    box-shadow: white 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);\n  }\n`;\n\nconst HSVGradient = ({ className, color, onChange, ...props }) => {\n  const latestColor = React.useRef(color);\n  const [focus, onFocus] = React.useState(false);\n  const [pressed, setPressed] = React.useState(false);\n  React.useEffect(() => {\n    latestColor.current = color;\n  });\n  const box = React.useRef();\n  const cursor = React.useRef();\n  let cursorPos = { x: 0, y: 0 };\n  const rgb = getRGB(color.hsv[0]);\n  const cssRgb = `rgb(${rgb[0]},${rgb[1]},${rgb[2]})`;\n\n  const setPosition = (pos, f) => {\n    cursorPos = pos;\n    cursor.current.style.top = `${pos.y}px`;\n    cursor.current.style.left = `${pos.x}px`;\n    if (f) {\n      cursor.current.focus();\n    }\n  };\n\n  const initPosition = ref => {\n    if (ref) {\n      const { hsv } = color;\n      cursorPos = {\n        x: Math.round((hsv[1] / 100) * (ref.clientWidth - 1)),\n        y: Math.round((1 - hsv[2] / 100) * (ref.clientHeight - 1)),\n      };\n      setPosition(cursorPos);\n    }\n  };\n\n  initPosition(box.current);\n  if (box.current) {\n    box.current.style.background = `${cssRgb} none repeat scroll 0% 0%`;\n  }\n\n  const convertMousePosition = ({ x, y }, ref) => {\n    const bounds = ref.getBoundingClientRect();\n    const pos = { x: x - bounds.left, y: y - bounds.top };\n    if (pos.x < 0) {\n      pos.x = 0;\n    }\n    if (pos.y < 0) {\n      pos.y = 0;\n    }\n    if (pos.x >= ref.clientWidth) {\n      pos.x = ref.clientWidth - 1;\n    }\n    if (pos.y >= ref.clientHeight) {\n      pos.y = ref.clientHeight - 1;\n    }\n    setPosition(pos, true);\n    const s = (pos.x / (ref.clientWidth - 1)) * 100;\n    const v = (1 - pos.y / (ref.clientHeight - 1)) * 100;\n    const c = latestColor.current;\n    onChange([c.hsv[0], s, v]);\n  };\n\n  React.useEffect(() => {\n    const ref = box.current;\n    initPosition(ref);\n    const handleDown = event => {\n      onFocus(true);\n      setPressed(true);\n      event.preventDefault();\n    };\n    const handleUp = event => {\n      convertMousePosition({ x: event.pageX, y: event.pageY }, ref);\n      setPressed(false);\n      event.preventDefault();\n    };\n    const handleMove = event => {\n      if (pressed || event.buttons) {\n        convertMousePosition({ x: event.pageX, y: event.pageY }, ref);\n        event.preventDefault();\n      }\n    };\n    const handleTouch = event => {\n      const xy = { x: event.touches[0].pageX, y: event.touches[0].pageY };\n      convertMousePosition(xy, ref);\n      event.preventDefault();\n    };\n\n    ref.addEventListener('mousedown', handleDown);\n    ref.addEventListener('mouseup', handleUp);\n    ref.addEventListener('mousemove', handleMove);\n    ref.addEventListener('touchdown', handleDown);\n    ref.addEventListener('touchup', handleUp);\n    ref.addEventListener('touchmove', handleTouch);\n    return () => {\n      ref.removeEventListener('mousedown', handleDown);\n      ref.removeEventListener('mouseup', handleUp);\n      ref.removeEventListener('mousemove', handleMove);\n      ref.removeEventListener('touchdown', handleDown);\n      ref.removeEventListener('touchup', handleUp);\n      ref.removeEventListener('touchmove', handleTouch);\n    };\n  }, []);\n  const handleKey = useEventCallback(event => {\n    if (!focus) return;\n    let { x, y } = cursorPos;\n    switch (event.key) {\n      case 'ArrowRight':\n        x += 1;\n        break;\n      case 'ArrowLeft':\n        x -= 1;\n        break;\n      case 'ArrowDown':\n        y += 1;\n        break;\n      case 'ArrowUp':\n        y -= 1;\n        break;\n      case 'Tab':\n        onFocus(false);\n        return;\n      default:\n        return;\n    }\n    event.preventDefault();\n    const bounds = box.current.getBoundingClientRect();\n    convertMousePosition({ x: x + bounds.left, y: y + bounds.top }, box.current);\n  });\n  const handleFocus = useEventCallback(event => {\n    onFocus(true);\n    event.preventDefault();\n  });\n  const handleBlur = useEventCallback(event => {\n    onFocus(false);\n    event.preventDefault();\n  });\n  return (\n    <div className={className}>\n      <StyledRoot {...props} ref={box} cssRgb={cssRgb} data-testid=\"hsvgradient-color\">\n        <div className=\"muicc-hsvgradient-s\">\n          <div className=\"muicc-hsvgradient-v\">\n            <div\n              ref={cursor}\n              tabIndex=\"0\"\n              role=\"slider\"\n              aria-valuemax={100}\n              aria-valuemin={0}\n              aria-valuenow={color.hsv[1]}\n              pressed={`${pressed}`}\n              data-testid=\"hsvgradient-cursor\"\n              className=\"muicc-hsvgradient-cursor\"\n              onKeyDown={handleKey}\n              onFocus={handleFocus}\n              onBlur={handleBlur}\n            >\n              <div className=\"muicc-hsvgradient-cursor-c\" />\n            </div>\n          </div>\n        </div>\n      </StyledRoot>\n    </div>\n  );\n};\n\nHSVGradient.propTypes = {\n  color: CommonTypes.color.isRequired,\n  className: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default HSVGradient;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\n// eslint-disable-next-line react/prop-types\nconst Uncontrolled = ({ element, defaultValue, ...props }) => {\n  const [value, onChange] = React.useState(defaultValue);\n  return React.createElement(element, { ...props, value, onChange });\n};\n\nexport default Element => {\n  const Composite = ({ defaultValue, value, onChange, ...props }) =>\n    defaultValue\n      ? React.createElement(Uncontrolled, { element: Element, defaultValue, ...props })\n      : React.createElement(Element, { value, onChange, ...props });\n  Composite.propTypes = { ...Element.propTypes, defaultValue: Element.propTypes.value, onChange: PropTypes.func };\n  Composite.defaultProps = { ...Element.defaultProps, defaultValue: undefined, onChange: () => {} };\n  return Composite;\n};\n","/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Input from '@material-ui/core/Input';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport * as ColorTool from '../helpers/colorTool';\nimport uncontrolled from '../helpers/uncontrolled';\nimport * as CommonTypes from '../helpers/commonTypes';\nimport useTranslate from '../helpers/useTranslate';\n\nconst StyledFormControl = styled(FormControl)`\n  width: 100px;\n`;\n\nconst StyledRoot = styled.div`\n  display: flex;\n  flex-direction: row;\n  & .muicc-colorinput-value {\n    margin: 8px;\n  }\n  & .muicc-colorinput-raw {\n    padding-right: 4px;\n  }\n`;\n\nconst ColorInput = ({ value, format, onChange, disableAlpha, enableErrorDisplay, forwardRef, ...props }) => {\n  const { t, i18n } = useTranslate();\n  const color = ColorTool.validateColor(value, disableAlpha, t, i18n.language);\n  let field;\n  let components;\n\n  const handleFieldChange = event => {\n    if (format === 'plain') {\n      onChange(event.target.value);\n    } else if (format === 'hex') {\n      onChange(`#${event.target.value}`);\n    } else {\n      /* if (format === 'rgb' || format === 'hsl' || format === 'hsv') { */\n      const cn = event.target.id;\n      const v = Number(event.target.value);\n      const values = {};\n      Object.keys(components).forEach(e => {\n        let cv = components[e].value;\n        if (e === cn) {\n          cv = v;\n          if (cv < components[e].min) cv = components[e].min;\n          if (cv > components[e].max) cv = components[e].max;\n        }\n        values[e] = cv;\n      });\n      onChange(values);\n    }\n  };\n\n  const buildInput = (cn, name, v, unit, isStart) => (\n    <>\n      <InputLabel htmlFor={cn} className=\"muicc-colorinput-label\" data-testid=\"colorinput-label\">\n        {name}\n      </InputLabel>\n      <Input\n        id={cn}\n        name={cn}\n        className=\"muicc-colorinput-input\"\n        label={name}\n        value={v}\n        placeholder={name}\n        inputProps={{ 'aria-label': `color-${name}`, 'data-testid': 'colorinput-input' }}\n        onChange={handleFieldChange}\n        startAdornment={isStart && unit && <InputAdornment position=\"start\">{unit}</InputAdornment>}\n        {...props}\n      />\n    </>\n  );\n\n  if (format === 'plain') {\n    field = buildInput('color-plain', 'Color', color.raw);\n  } else {\n    components = ColorTool.getComponents(color, format, disableAlpha, t);\n    const names = Object.keys(components);\n    field = (\n      <StyledRoot ref={forwardRef}>\n        {names.map(cn => (\n          <FormControl key={cn} className=\"muicc-colorinput-raw\" error={!!color.error}>\n            {buildInput(cn, components[cn].name, components[cn].value, components[cn].unit, names.length === 1)}\n          </FormControl>\n        ))}\n      </StyledRoot>\n    );\n  }\n  return (\n    <StyledFormControl error={!!color.error} data-testid=\"colorinput\">\n      {field}\n      {enableErrorDisplay && color.error && <FormHelperText id=\"component-error-text\">{color.error}</FormHelperText>}\n    </StyledFormControl>\n  );\n};\n\nColorInput.propTypes = {\n  value: CommonTypes.color,\n  format: PropTypes.string,\n  onChange: PropTypes.func.isRequired,\n  /**\n    Don't use alpha\n   */\n  disableAlpha: PropTypes.bool,\n  /**\n    Internal usage\n   */\n  enableErrorDisplay: PropTypes.bool,\n  forwardRef: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n};\n\nColorInput.defaultProps = {\n  value: '',\n  format: 'plain',\n  forwardRef: undefined,\n  disableAlpha: false,\n  enableErrorDisplay: true,\n};\n\nexport default uncontrolled(ColorInput);\n","/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport ColorButton from './ColorButton';\nimport * as CommonTypes from '../helpers/commonTypes';\nimport useTranslate from '../helpers/useTranslate';\n\nconst StyledRoot = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  padding: 8px 0 0 8px;\n  & .muicc-palette-button {\n    margin: 0 8px 8px 0;\n    padding: 0;\n  }\n`;\n\nconst ColorPalette = ({ size, borderWidth, palette, onSelect, disableAlpha }) => {\n  const { t } = useTranslate();\n  const handleSelectColor = name => {\n    const translatedName = t(name);\n    if (onSelect) onSelect(translatedName, palette[name]);\n  };\n\n  return (\n    <StyledRoot>\n      {Object.keys(palette).map(name => (\n        <ColorButton\n          size={size}\n          key={`${name}`}\n          color={palette[name]}\n          className=\"muicc-palette-button\"\n          borderWidth={borderWidth}\n          tooltip={name}\n          disableAlpha={disableAlpha}\n          onClick={() => handleSelectColor(name)}\n        />\n      ))}\n    </StyledRoot>\n  );\n};\n\nColorPalette.propTypes = {\n  borderWidth: PropTypes.number,\n  size: PropTypes.number,\n  palette: CommonTypes.palette.isRequired,\n  forwardRef: PropTypes.shape({ current: PropTypes.instanceOf(Element) }),\n  onSelect: PropTypes.func,\n  /**\n    Don't use alpha\n   */\n  disableAlpha: PropTypes.bool,\n};\n\nColorPalette.defaultProps = {\n  borderWidth: 0,\n  size: 24,\n  forwardRef: undefined,\n  onSelect: undefined,\n  disableAlpha: false,\n};\n\nexport default ColorPalette;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport styled from 'styled-components';\nimport Slider from '@material-ui/core/Slider';\n\nexport default styled(Slider)`\n  width: 100%;\n  height: 16px;\n  padding: 0;\n  & .MuiSlider-rail {\n    height: 16px;\n    opacity: 1;\n    background: rgba(0, 0, 0, 0)\n      linear-gradient(\n        to right,\n        rgb(255, 0, 0) 0%,\n        rgb(255, 255, 0) 17%,\n        rgb(0, 255, 0) 33%,\n        rgb(0, 255, 255) 50%,\n        rgb(0, 0, 255) 67%,\n        rgb(255, 0, 255) 83%,\n        rgb(255, 0, 0) 100%\n      )\n      repeat scroll 0% 0%;\n    border-radius: 0;\n  }\n  & .MuiSlider-track {\n    height: 16px;\n    opacity: 0;\n    border-radius: 4px;\n    background-color: transparent;\n  }\n  & .MuiSlider-thumb {\n    width: 16px;\n    height: 16px;\n    margin-top: 0px;\n    margin-left: -8px;\n    background-color: #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    &:focus {\n      box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n    }\n  }\n`;\n","/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport styled from 'styled-components';\nimport Slider from '@material-ui/core/Slider';\n\n// eslint-disable-next-line react/jsx-props-no-spreading\nexport default styled(({ color, ...other }) => <Slider {...other} />)`\n  color: #6666;\n  width: 100%;\n  height: 16px;\n  padding: 0;\n  background: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%),\n    linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%);\n  background-color: rgba(0, 0, 0, 0);\n  background-position-x: 0%, 0%, 0%, 0%;\n  background-position-y: 0%, 0%, 0%, 0%;\n  background-size: auto, auto, auto, auto;\n  background-size: 8px 8px;\n  background-color: white;\n  background-position: 0 0, 4px 0, 4px -4px, 0px 4px;\n  & .MuiSlider-rail {\n    height: 16px;\n    opacity: 1;\n    background: ${props =>\n      `rgba(0, 0, 0, 0) linear-gradient(to right, ${props.color}00 0%, ${props.color} 100%) repeat scroll 0% 0%`};\n    border-radius: 0;\n  }\n  & .MuiSlider-track {\n    height: 16px;\n    opacity: 0;\n    border-radius: 4px;\n  }\n  & .MuiSlider-thumb {\n    width: 16px;\n    height: 16px;\n    margin-top: 0px;\n    margin-left: -8px;\n    background-color: #f0f0f0;\n    box-shadow: rgba(0, 0, 0, 0.37) 0px 1px 4px 0px;\n    &:focus {\n      box-shadow: 0px 0px 0px 8px rgba(63, 81, 181, 0.16);\n    }\n  }\n`;\n","/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport HSVGradient from './HSVGradient';\nimport ColorInput from '../ColorInput';\nimport ColorPalette from '../ColorPalette';\nimport HueSlider from './HueSlider';\nimport AlphaSlider from './AlphaSlider';\nimport { parse as colorParse, getCssColor, validateColor } from '../../helpers/colorTool';\nimport uncontrolled from '../../helpers/uncontrolled';\nimport * as CommonTypes from '../../helpers/commonTypes';\nimport useTranslate from '../../helpers/useTranslate';\n\n// To stay compatible with MUI theme\n// TODO remove in future\nconst useStyles = () =>\n  makeStyles(theme => ({\n    root: {\n      backgroundColor: theme.palette.background.paper,\n      position: 'relative',\n      width: 'min-content',\n      height: 'min-content',\n      padding: '0px',\n    },\n  }))();\n\nconst StyledBox = styled.div`\n  justify-content: space-around;\n  overflow: hidden;\n  width: ${props => `${props.boxWidth}px`};\n  padding: 0px;\n  & .muicc-colorbox-hsvgradient {\n    width: ${props => `calc(${props.boxWidth}px - 16px)`};\n    height: calc(128px - 16px);\n    margin: 8px;\n  }\n  & .muicc-colorbox-sliders {\n    width: ${props => `${props.boxWidth}px`};\n    padding: 8px 8px 4px 8px;\n  }\n  & .muicc-colorbox-inputs {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 8px 4px 8px 8px;\n    justify-content: space-between;\n  }\n  & .muicc-colorbox-input {\n    marginright: 14px;\n  }\n  & .muicc-colorbox-colorBg {\n    width: 48px;\n    height: 48px;\n    background: linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(135deg, #ccc 25%, transparent 25%),\n      linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(135deg, transparent 75%, #ccc 75%);\n    background-size: 8px 8px;\n    background-position: 0 0, 4px 0, 4px -4px, 0px 4px;\n    background-color: white;\n    border-radius: 4px;\n  }\n  & .muicc-colorbox-color {\n    width: 48px;\n    height: 48px;\n    background-color: ${props => props.backgroundColor};\n    border-radius: 4px;\n  }\n  & .muicc-colorbox-controls {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    padding: 8px;\n  }\n  & .muicc-colorbox-error {\n    color: #f44336;\n    line-height: 36.5px;\n  }\n  & .muicc-colorbox-controls > button {\n    margin-left: auto;\n  }\n`;\n\nconst ColorBox = ({ value, palette, inputFormats, deferred, onChange: _onChange, disableAlpha, ...props }) => {\n  const { t, i18n } = useTranslate();\n  let color = validateColor(value, disableAlpha, t, i18n.language);\n  let onChange = _onChange;\n  let onDeferredChange;\n  if (deferred) {\n    [color, onChange] = React.useState(color);\n    onDeferredChange = _onChange;\n  }\n\n  const handleSet = () => {\n    onDeferredChange(color);\n  };\n\n  const handleHueChange = (event, newValue) => {\n    const c = colorParse([newValue, color.hsv[1], color.hsv[2]], 'hsv');\n    onChange(c);\n  };\n\n  const handleAlphaChange = (event, newValue) => {\n    const alpha = newValue / 100;\n    const c = colorParse([color.rgb[0], color.rgb[1], color.rgb[2], alpha], 'rgb');\n    onChange(c);\n  };\n\n  const handleSVChange = hsv => {\n    const c = colorParse(hsv, 'hsv');\n    onChange(c);\n  };\n\n  const handlePaletteSelection = (name, colour) => {\n    const c = colorParse(colour);\n    // To handle back the translated name\n    c.name = name;\n    onChange(c);\n  };\n\n  const handleInputChange = newValue => {\n    const c = colorParse(newValue);\n    onChange(c);\n  };\n\n  const displayInput = () =>\n    inputFormats && (\n      <div className=\"muicc-colorbox-inputs\">\n        <div className=\"muicc-colorbox-colorBg\">\n          <div className=\"muicc-colorbox-color\" />\n        </div>\n        {inputFormats.map(input => (\n          <ColorInput\n            key={input}\n            value={color}\n            format={input}\n            disableAlpha\n            enableErrorDisplay={false}\n            className=\"muicc-colorbox-input\"\n            onChange={handleInputChange}\n          />\n        ))}\n      </div>\n    );\n  const { hsv } = color;\n  let { alpha } = color;\n  alpha = alpha === undefined ? 100 : Math.floor(alpha * 100);\n  const cssColor = getCssColor(color, 'hex', true);\n  const { backgroundColor } = color.css;\n  const boxWidth = 320;\n  const classroot = useStyles().root;\n  return (\n    <Box p={2} className={classroot} {...props}>\n      <StyledBox boxWidth={boxWidth} backgroundColor={backgroundColor}>\n        <HSVGradient className=\"muicc-colorbox-hsvgradient\" color={color} onChange={handleSVChange} />\n        <div className=\"muicc-colorbox-sliders\">\n          <HueSlider\n            data-testid=\"hueslider\"\n            aria-label=\"color slider\"\n            value={hsv[0]}\n            min={0}\n            max={360}\n            onChange={handleHueChange}\n          />\n          {!disableAlpha && (\n            <AlphaSlider\n              data-testid=\"alphaslider\"\n              color={cssColor}\n              valueLabelDisplay=\"auto\"\n              aria-label=\"alpha slider\"\n              value={alpha}\n              min={0}\n              max={100}\n              onChange={handleAlphaChange}\n            />\n          )}\n        </div>\n        {displayInput(inputFormats)}\n        {palette && (\n          <>\n            <Divider />\n            <ColorPalette\n              size={26.65}\n              palette={palette}\n              onSelect={handlePaletteSelection}\n              disableAlpha={disableAlpha}\n            />\n          </>\n        )}\n        <div className=\"muicc-colorbox-controls\">\n          {color.error && (\n            <span className=\"muicc-colorbox-error\" data-testid=\"colorbox-error\">\n              {t(color.error)}\n            </span>\n          )}\n          {deferred && <Button onClick={handleSet}>{t('Set')}</Button>}\n        </div>\n      </StyledBox>\n    </Box>\n  );\n};\n\nColorBox.propTypes = {\n  value: CommonTypes.color,\n  deferred: PropTypes.bool,\n  palette: CommonTypes.palette,\n  inputFormats: CommonTypes.inputFormats,\n  onChange: PropTypes.func.isRequired,\n  /**\n    Don't use alpha\n   */\n  disableAlpha: PropTypes.bool,\n};\n\nColorBox.defaultProps = {\n  value: undefined,\n  deferred: false,\n  palette: undefined,\n  inputFormats: ['hex', 'rgb'],\n  disableAlpha: false,\n};\n\nexport default uncontrolled(ColorBox);\n","/* eslint-disable jsx-a11y/interactive-supports-focus */\n/* eslint-disable jsx-a11y/click-events-have-key-events */\n/* eslint-disable react/jsx-props-no-spreading */\n/**\n * Copyright (c) Mik BRY\n * mik@mikbry.com\n *\n * This source code is licensed under the license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport styled from 'styled-components';\nimport TextField from '@material-ui/core/TextField';\nimport Popover from '@material-ui/core/Popover';\nimport ColorButton from './ColorButton';\nimport ColorBox from './ColorBox';\nimport * as ColorTool from '../helpers/colorTool';\nimport uncontrolled from '../helpers/uncontrolled';\nimport * as CommonTypes from '../helpers/commonTypes';\nimport useTranslate from '../helpers/useTranslate';\n\nconst StyledRoot = styled.div`\n  display: flex;\n  flex-direction: row;\n  width: max-content;\n  & .muicc-colorpicker-button {\n    margin: 6px;\n  }\n`;\n\nconst getColorText = color => {\n  let text = color.name;\n  if (text.startsWith('color-')) {\n    if (typeof color.raw !== 'string' || !color.raw.startsWith('#')) {\n      text = ColorTool.getCssColor(color, 'hex');\n    } else {\n      text = color.raw;\n    }\n  } else if (text === 'none') {\n    text = color.raw;\n  }\n  return text;\n};\n\nconst ColorPicker = ({\n  value,\n  disableTextfield,\n  deferred,\n  palette,\n  inputFormats,\n  openAtStart,\n  onChange,\n  onOpen,\n  doPopup,\n  disableAlpha,\n}) => {\n  const refPicker = React.useRef();\n  const [open, setOpen] = React.useState(openAtStart);\n  const { t, i18n } = useTranslate();\n  const color = ColorTool.validateColor(value, disableAlpha, t, i18n.language);\n  const raw = getColorText(color);\n  const handleClick = () => {\n    const b = Boolean(refPicker.current);\n    setOpen(b);\n    if (onOpen) onOpen(b);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    if (onOpen) onOpen(false);\n  };\n\n  const handleColorChange = newColor => {\n    onChange(newColor);\n    if (deferred) {\n      handleClose();\n    }\n  };\n\n  const handleChange = event => {\n    onChange(event.target.value);\n  };\n\n  let box = (\n    <ColorBox\n      value={color}\n      style={{ position: 'relative' }}\n      deferred={deferred}\n      palette={palette}\n      inputFormats={inputFormats}\n      disableAlpha={disableAlpha}\n      onChange={handleColorChange}\n    />\n  );\n  if (doPopup) {\n    box = doPopup(box);\n  } else {\n    box = (\n      <Popover\n        id=\"color-popover\"\n        open={open}\n        anchorEl={refPicker.current}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center',\n        }}\n      >\n        {box}\n      </Popover>\n    );\n  }\n\n  return (\n    <StyledRoot ref={refPicker}>\n      <ColorButton\n        data-testid=\"colorpicker-button\"\n        className=\"muicc-colorpicker-button\"\n        color={color}\n        onClick={handleClick}\n      />\n      {disableTextfield ? (\n        <div role=\"button\" data-testid=\"colorpicker-noinput\" onClick={handleClick}>\n          {color.raw}\n        </div>\n      ) : (\n        <TextField color=\"primary\" value={raw} onChange={handleChange} data-testid=\"colorpicker-input\" />\n      )}\n      {box}\n    </StyledRoot>\n  );\n};\n\nColorPicker.propTypes = {\n  value: CommonTypes.color,\n  disableTextfield: PropTypes.bool,\n  deferred: PropTypes.bool,\n  palette: CommonTypes.palette,\n  inputFormats: CommonTypes.inputFormats,\n  onChange: PropTypes.func.isRequired,\n  onOpen: PropTypes.func,\n  openAtStart: PropTypes.bool,\n  doPopup: PropTypes.func,\n  /**\n    Don't use alpha\n   */\n  disableAlpha: PropTypes.bool,\n};\n\nColorPicker.defaultProps = {\n  value: 'none',\n  disableTextfield: false,\n  deferred: false,\n  palette: undefined,\n  inputFormats: ['hex', 'rgb'],\n  onOpen: undefined,\n  openAtStart: false,\n  doPopup: undefined,\n  disableAlpha: false,\n};\n\nexport default uncontrolled(ColorPicker);\n"],"names":["cssColorsTranslated","language","CSSCOLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","getCssHexa","n","alpha","hex","toString","toUpperCase","substr","Number","isNaN","undefined","a","length","getRgb","c","rgbToInt","_rgb","rgb","map","_c","fromRgb","error","v","i","Math","round","substring","format","value","fromCssHexa","isInteger","padding","getDeg","_h","h","indexOf","PI","parseFloat","getValue","_v","fromHsl","_hsl","hsl","s","l","abs","x","m","floor","fromHsv","hsv","f","p","q","t","getMinMax","r","g","b","cmin","min","cmax","max","delta","getHsl","toFixed","getHsv","rc","gc","bc","tupleToArray","tuple","split","filter","e","colorsFormats","colorsFunc","cssColors","colorsCssFunc","colorsCssConditions","startsWith","parse","raw","_format","alpha255","disableAlpha","color","name","trim","toLocaleLowerCase","index","findIndex","func","css","backgroundColor","Array","isArray","push","backgroundImage","backgroundSize","backgroundPosition","Object","keys","find","getCssColor","validateColor","_color","translate","translateLanguage","isTranslated","forEach","translated","oneOfType","shape","number","string","array","arrayOf","palette","objectOf","inputFormats","globalTranslate","use","i18n","useTranslate","_translation","StyledButton","styled","other","React","Button","props","style","borderWidth","borderColor","size","hoverColor","Styleddiv","div","ColorButton","forwardRef","tooltip","ColorTool","component","ref","variant","Tooltip","title","propTypes","CommonTypes","isRequired","PropTypes","bool","current","instanceOf","Element","defaultProps","useEnhancedEffect","window","useEventCallback","fn","StyledRoot","cssRgb","pressed","HSVGradient","className","onChange","latestColor","useRef","focus","onFocus","useState","setPressed","useEffect","box","cursor","cursorPos","y","setPosition","pos","top","left","initPosition","clientWidth","clientHeight","background","convertMousePosition","bounds","getBoundingClientRect","handleDown","event","preventDefault","handleUp","pageX","pageY","handleMove","buttons","handleTouch","xy","touches","addEventListener","removeEventListener","handleKey","key","handleFocus","handleBlur","tabIndex","role","onKeyDown","onBlur","Uncontrolled","element","defaultValue","createElement","Composite","StyledFormControl","FormControl","ColorInput","field","components","enableErrorDisplay","handleFieldChange","target","cn","id","values","cv","buildInput","unit","isStart","InputLabel","htmlFor","Input","label","placeholder","inputProps","startAdornment","InputAdornment","position","names","FormHelperText","uncontrolled","ColorPalette","onSelect","onClick","translatedName","handleSelectColor","Slider","StyledBox","boxWidth","ColorBox","onDeferredChange","deferred","_onChange","handleInputChange","newValue","colorParse","cssColor","classroot","makeStyles","theme","root","paper","width","height","Box","HueSlider","AlphaSlider","valueLabelDisplay","input","Divider","colour","ColorPicker","disableTextfield","openAtStart","onOpen","doPopup","refPicker","open","setOpen","text","getColorText","handleClick","Boolean","handleClose","newColor","Popover","anchorEl","onClose","anchorOrigin","vertical","horizontal","transformOrigin","TextField"],"mappings":"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"}